/* Base */
html, body {
  height: 100%;
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background: white;
}

#app { height: 100%; }

/* Fade helpers */
.fade-in { animation: fadeIn 600ms ease forwards; }
.fade-out { animation: fadeOut 450ms ease forwards; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

/* Screen 0 */
.error-top-left {
  position: fixed;
  top: 12px;
  left: 12px;
  font-size: 12px;
  color: #888;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Center helper */
.center {
  height: 100%;
  display: grid;
  place-items: center;
  padding: 24px;
  text-align: center;
}

.intro-text {
  font-size: clamp(22px, 4vw, 44px);
  font-weight: 900;
  letter-spacing: -0.02em;
}

/* Scene layout */
.scene {
  height: 100%;
  display: grid;
  grid-template-rows: 1fr auto;
  overflow: hidden;
}

/* Sky */
.sky {
  position: relative;
  background: linear-gradient(#bfe4ff, #f7fbff);
  overflow: hidden;
}

/* Background layers */
.bg-layer {
  position: absolute;
  left: -20%;
  right: -20%;
  pointer-events: none;
}

/* Clouds */
.clouds {
  top: 7%;
  height: 140px;
  opacity: 0.55;
  background:
    radial-gradient(circle at 10% 60%, #fff 0 22px, transparent 23px),
    radial-gradient(circle at 16% 55%, #fff 0 30px, transparent 31px),
    radial-gradient(circle at 24% 62%, #fff 0 20px, transparent 21px),
    radial-gradient(circle at 58% 55%, #fff 0 26px, transparent 27px),
    radial-gradient(circle at 65% 62%, #fff 0 18px, transparent 19px),
    radial-gradient(circle at 72% 52%, #fff 0 34px, transparent 35px),
    radial-gradient(circle at 84% 60%, #fff 0 20px, transparent 21px);
  animation: driftClouds 26s linear infinite;
}

@keyframes driftClouds {
  from { transform: translateX(0); }
  to   { transform: translateX(10%); }
}

/* Far houses */
.houses-far {
  bottom: 26vh;
  height: 210px;
  opacity: 0.35;
  animation: parallaxFar 20s linear infinite;
  background:
    /* blocky house shapes */
    repeating-linear-gradient(90deg,
      rgba(40,80,120,0.35) 0 85px,
      transparent 85px 115px
    );
  clip-path: polygon(
    0% 100%,
    0% 62%,
    8% 62%,
    12% 50%,
    22% 50%,
    26% 62%,
    36% 62%,
    42% 46%,
    54% 46%,
    60% 62%,
    72% 62%,
    76% 52%,
    86% 52%,
    90% 62%,
    100% 62%,
    100% 100%
  );
}

@keyframes parallaxFar {
  from { transform: translateX(0); }
  to   { transform: translateX(-6%); }
}

/* Near houses */
.houses-near {
  bottom: 26vh;
  height: 240px;
  opacity: 0.55;
  animation: parallaxNear 13s linear infinite;
  background:
    repeating-linear-gradient(90deg,
      rgba(30,60,90,0.55) 0 100px,
      transparent 100px 140px
    );
  clip-path: polygon(
    0% 100%,
    0% 70%,
    4% 70%,
    10% 52%,
    22% 52%,
    28% 70%,
    38% 70%,
    44% 48%,
    58% 48%,
    64% 70%,
    74% 70%,
    80% 55%,
    92% 55%,
    96% 70%,
    100% 70%,
    100% 100%
  );
}

@keyframes parallaxNear {
  from { transform: translateX(0); }
  to   { transform: translateX(-12%); }
}

/* Tree line */
.trees {
  bottom: 26vh;
  height: 150px;
  opacity: 0.55;
  animation: parallaxTrees 10s linear infinite;
  background:
    radial-gradient(circle at 6% 85%, rgba(20,120,80,0.55) 0 34px, transparent 35px),
    radial-gradient(circle at 12% 88%, rgba(20,120,80,0.55) 0 26px, transparent 27px),
    radial-gradient(circle at 20% 86%, rgba(20,120,80,0.55) 0 30px, transparent 31px),
    radial-gradient(circle at 32% 88%, rgba(20,120,80,0.55) 0 28px, transparent 29px),
    radial-gradient(circle at 44% 85%, rgba(20,120,80,0.55) 0 34px, transparent 35px),
    radial-gradient(circle at 58% 88%, rgba(20,120,80,0.55) 0 26px, transparent 27px),
    radial-gradient(circle at 70% 86%, rgba(20,120,80,0.55) 0 30px, transparent 31px),
    radial-gradient(circle at 82% 88%, rgba(20,120,80,0.55) 0 28px, transparent 29px),
    radial-gradient(circle at 94% 85%, rgba(20,120,80,0.55) 0 34px, transparent 35px);
}

@keyframes parallaxTrees {
  from { transform: translateX(0); }
  to   { transform: translateX(-16%); }
}

/* Overlay */
.overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 24px;
}

.card {
  width: min(720px, 92vw);
  background: rgba(255,255,255,0.90);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 14px 40px rgba(0,0,0,0.10);
  text-align: center;
  backdrop-filter: blur(6px);
}

.question {
  margin: 0 0 10px;
  font-size: clamp(18px, 3.2vw, 34px);
  font-weight: 900;
  line-height: 1.15;
}

.subtext {
  margin: 0 0 12px;
  font-size: 14px;
  opacity: 0.75;
}

.btn-row {
  position: relative;
  width: min(560px, 92%);
  margin: 0 auto;
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  padding: 14px 10px 6px;
}

button {
  border: 0;
  border-radius: 999px;
  padding: 12px 18px;
  font-size: 16px;
  font-weight: 900;
  cursor: pointer;
  transition: transform 120ms ease, filter 120ms ease;
  position: relative;
}

button:active { transform: scale(0.98); }

.btn-yes { background: #ff4d88; color: white; }
.btn-yes:hover { filter: brightness(1.03); }

.btn-no { background: #222; color: white; }

.warning {
  margin-top: 12px;
  min-height: 22px;
  font-weight: 900;
  color: #c4002a;
}

/* Street */
.street {
  height: 28vh;
  min-height: 190px;
  background: linear-gradient(#2b2b2b, #1f1f1f);
  position: relative;
  overflow: hidden;
}

.street::before {
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 48%;
  height: 6px;
  background: repeating-linear-gradient(90deg, #ffd54a 0 42px, transparent 42px 76px);
  opacity: 0.85;
}

/* Duck: body + legs that actually alternate */
.duck-wrap {
  position: absolute;
  left: -20%;
  bottom: 26px;
  width: 140px;
  height: 90px;
  animation: duckMove 8s linear infinite;
  filter: drop-shadow(0 10px 10px rgba(0,0,0,0.22));
}

@keyframes duckMove {
  from { transform: translateX(0); }
  to   { transform: translateX(140vw); }
}

.duck-body {
  position: absolute;
  left: 30px;
  bottom: 18px;
  width: 88px;
  height: 48px;
  background: #ffd54a;
  border-radius: 30px;
}

.duck-head {
  position: absolute;
  left: 92px;
  bottom: 42px;
  width: 34px;
  height: 30px;
  background: #ffd54a;
  border-radius: 18px;
}

.duck-eye {
  position: absolute;
  left: 18px;
  top: 10px;
  width: 6px;
  height: 6px;
  background: #111;
  border-radius: 50%;
}

.duck-beak {
  position: absolute;
  left: 26px;
  top: 14px;
  width: 18px;
  height: 10px;
  background: #ff9f1a;
  border-radius: 4px 10px 10px 4px;
}

.duck-tail {
  position: absolute;
  left: 20px;
  bottom: 34px;
  width: 18px;
  height: 18px;
  background: #ffd54a;
  border-radius: 6px;
  transform: rotate(18deg);
}

/* Legs */
.leg {
  position: absolute;
  bottom: 10px;
  width: 26px;
  height: 10px;
  background: #ff9f1a;
  border-radius: 8px;
  transform-origin: 6px 6px;
}

.leg.left {
  left: 52px;
  animation: legSwing 450ms ease-in-out infinite;
}

.leg.right {
  left: 74px;
  animation: legSwing 450ms ease-in-out infinite reverse;
}

@keyframes legSwing {
  0%, 100% { transform: translateY(0) rotate(6deg); }
  50% { transform: translateY(-3px) rotate(-10deg); }
}

/* Duck bob */
.duck-wrap .duck-body,
.duck-wrap .duck-head,
.duck-wrap .duck-tail {
  animation: duckBob 450ms ease-in-out infinite;
}
@keyframes duckBob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

/* Final page: STATIC collage (no scrolling) */
.final {
  height: 100vh;
  position: relative;
  background: #fff3fa;
  overflow: hidden; /* no scrolling */
}

.hearts-fall {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0.35;
  background-image:
    radial-gradient(circle, rgba(255,77,136,0.30) 0 2px, transparent 3px),
    radial-gradient(circle, rgba(255,0,90,0.18) 0 2px, transparent 3px);
  background-size: 38px 38px, 56px 56px;
  animation: heartDrift 7s linear infinite;
}

@keyframes heartDrift {
  from { transform: translateY(-30px); }
  to   { transform: translateY(30px); }
}


.final-inner {
  position: relative;
  z-index: 1;
  height: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 14px 12px 16px;
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 10px;
}

.final-header {
  text-align: center;
}

.final-header h1 {
  margin: 6px 0 4px;
  font-size: 22px;
  font-weight: 900;
}
.final-header p {
  margin: 0;
  opacity: 0.75;
  font-size: 13px;
}

.collage {
  position: relative;
  padding: 40px 0 80px;
}


.collage-board {
  width: min(1100px, 94vw);
  min-height: 2200px;     /* BIG vertical scrapbook */
  position: relative;
  margin: 40px auto 80px;
}


.note {
  position: absolute;
  padding: 12px 14px;
  border-radius: 18px;
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: 0 14px 30px rgba(0,0,0,0.08);
  transform: rotate(var(--r, 0deg));
  width: var(--w, 240px);
}

.note h3 {
  margin: 0 0 6px;
  font-size: 16px;
  font-weight: 900;
}
.note p {
  margin: 0;
  font-size: 13px;
  opacity: 0.75;
}

.polaroid {
  position: absolute;
  width: var(--w, 220px);
  background: rgba(255,255,255,0.95);
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: 0 16px 40px rgba(0,0,0,0.12);
  padding: 10px;
  transform: rotate(var(--r, 0deg));
}

.polaroid img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 12px;
  display: block;
}

.polaroid .cap {
  font-size: 13px;
  font-weight: 900;
  margin-top: 8px;
}
.polaroid::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 30%;
  width: 40%;
  height: 18px;
  background: rgba(255, 235, 160, 0.75);
  border-radius: 6px;
  transform: rotate(-2deg);
  box-shadow: 0 6px 14px rgba(0,0,0,0.10);
}

.polaroid img {
  width: 100%;
  height: auto;
  max-height: 260px;
  object-fit: cover;
  border-radius: 12px;
}

/* Grid fills the rest of the screen */
.collage-grid {
  height: 100%;
  display: grid;
  gap: 10px;

  /* Desktop default */
  grid-template-columns: repeat(3, 1fr);
  grid-auto-rows: 1fr;
}

/* Tablet */
@media (max-width: 980px) {
  .collage-grid { grid-template-columns: repeat(2, 1fr); }
}

/* Phone: 2 columns so it can fit without scrolling */
@media (max-width: 520px) {
  .final-header h1 { font-size: 18px; }
  .final-header p { font-size: 12px; }

  .collage-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
}

.collage-item {
  background: rgba(255,255,255,0.92);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 16px;
  box-shadow: 0 10px 22px rgba(0,0,0,0.10);
  overflow: hidden;
  display: grid;
  grid-template-rows: 1fr auto;
  min-height: 0; /* important to prevent overflow */
}

.collage-item img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* keeps it clean even when small */
  display: block;
}

.collage-cap {
  padding: 8px 10px;
  font-weight: 900;
  font-size: 12px;
  line-height: 1.1;
}

.collage-cap small {
  display: block;
  font-weight: 700;
  opacity: 0.7;
  margin-top: 3px;
  font-size: 11px;
}

.collage-note {
  padding: 10px;
}

.collage-note h3 {
  margin: 0 0 4px;
  font-size: 13px;
  font-weight: 900;
}
.collage-note p {
  margin: 0;
  opacity: 0.78;
  font-size: 12px;
}

/* Make posters bigger on desktop only */
@media (min-width: 981px) {
  .span-2 { grid-column: span 2; }
}

/* Mobile-first tweaks */
@media (max-width: 520px) {
  .overlay { padding: 14px; }

  .card {
    width: 100%;
    padding: 16px;
    border-radius: 16px;
  }

  .question {
    font-size: 22px;
    line-height: 1.15;
  }

  .subtext {
    font-size: 13px;
  }

  .btn-row {
    width: 100%;
    gap: 10px;
    padding: 10px 0 0;
  }

  .btn-row button {
    width: 100%;           /* stack buttons */
    padding: 14px 16px;
    font-size: 16px;
  }

  .street { min-height: 170px; }
}




.sparkle {
  position: absolute;
  font-size: 26px;
  opacity: 0.8;
  animation: sparkle 1.8s ease-in-out infinite;
}
@keyframes sparkle {
  0%, 100% { transform: translateY(0); opacity: 0.75; }
  50% { transform: translateY(-6px); opacity: 1; }
}
